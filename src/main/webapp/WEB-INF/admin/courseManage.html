<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>后台管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入 Bootstrap -->
    <link href="/ajxlk/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/css/adminManage.css">
    <link rel="stylesheet" type="text/css" href="/css/courseManage.css">
    <link rel="stylesheet" type="text/css" href="/css/Foot.css">

    <div th:include="main/commonStyle :: style"/>

    <!-- HTML5 Shim 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
    <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class="hold-transition skin-blue sidebar-mini">

<div class="wrapper">
    <div th:include="main/mainHeader :: header"/>
    <div th:include="main/mainLeft :: left"/>
    <!--<div class="head">-->
        <!--<div class="leftlogo">-->
            <!--<a href=""><img src="../img/managehome/logo.png"></a>-->
        <!--</div>-->
        <!--<div class="rightlink">-->
            <!--<ul class="rightlinkbox">-->
                <!--<li class="headlink">-->
                    <!--<a href=""><span class="glyphicon glyphicon-list-alt"></span> 课程</a>-->
                <!--</li>-->
                <!--<li class="headlink">-->
                    <!--<a href=""><span class="glyphicon glyphicon-road"></span> 职业路径</a>-->
                <!--</li>-->
                <!--<li class="headlink">-->
                    <!--<a href=""><span class="glyphicon glyphicon-bell"></span> 论坛</a>-->
                <!--</li>-->
                <!--<div class="clear"></div>-->
            <!--</ul>-->
        <!--</div>-->
        <!--<div class="rightadmin">-->
            <!--<a href=""><img src="../img/managehome/user.jpg">admin</a>-->
        <!--</div>-->
        <!--<div class="search  hidden-sm">-->
            <!--<form class="navbar-form navbar-left" role="search" style="width: 100%;padding: 0;">-->
                <!--<div class="form-group searchbox">-->
                    <!--<input type="text" class="form-control" placeholder="Search">-->
                <!--</div>-->
                <!--<button type="submit" class="btn btn-default searchbtn"><span class="glyphicon glyphicon-search"></span>-->
                <!--</button>-->
            <!--</form>-->
            <!--<div class="clear"></div>-->
        <!--</div>-->
        <!--<div class="smsearch visible-sm">-->
            <!--<ul class="nav navbar-nav">-->
                <!--<li class="dropdown">-->
                    <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown" id="dropdown">-->
                        <!--<span class="glyphicon glyphicon-search"></span>-->
                    <!--</a>-->
                    <!--<ul class="dropdown-menu" style="    width: 274px;">-->
                        <!--<li>-->
                            <!--<form class="navbar-form navbar-left" role="search">-->
                                <!--<div class="form-group searchbox">-->
                                    <!--<input type="text" class="form-control" placeholder="Search">-->
                                <!--</div>-->
                                <!--<button type="submit" class="btn btn-default"><span-->
                                        <!--class="glyphicon glyphicon-search"></span></button>-->
                            <!--</form>-->
                        <!--</li>-->

                    <!--</ul>-->
                <!--</li>-->
            <!--</ul>-->
            <!--<div class="clear"></div>-->
        <!--</div>-->

    <!--</div>-->

    <div class="content-wrapper">
        <div class="rightcontent">
            <ul class="tips">
                <li class="tiplist act">课程信息</li>
                <li class="tiplist">统计报表</li>
                <div class="clear"></div>
            </ul>
            <div class="contbox">
                <div class="coursebox">
                    <div class="searchformbox">
                        <span class="styleboxhead">查询条件</span>
                        <form role="form">
                            <div class="form-group foBox">
                                <label for="name">分类</label>
                                <div id="sjld" style="width:520px;margin:0 auto;position:relative;">
                                    <div class="m_zlxg" id="shenfen">
                                        <p title="">选择分类</p>
                                        <div class="m_zlxg2">
                                            <ul>
                                                <div class="clear"></div>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="m_zlxg" id="chengshi">
                                        <p title="">选择分类</p>
                                        <div class="m_zlxg2">
                                            <ul>
                                                <div class="clear"></div>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="m_zlxg" id="quyu">
                                        <p title="">选择分类</p>
                                        <div class="m_zlxg2">
                                            <ul>
                                                <div class="clear"></div>
                                            </ul>
                                        </div>
                                    </div>
                                    <input id="sfdq_num" type="hidden" value="" />
                                    <input id="csdq_num" type="hidden" value="" />
                                    <input id="sfdq_tj" type="hidden" value="" />
                                    <input id="csdq_tj" type="hidden" value="" />
                                    <input id="qydq_tj" type="hidden" value="" />
                                </div>
                                <div class="clear"></div>
                            </div>
                            <div class="form-group foBox">
                                <label for="name">名称</label>
                                <input type="text" class="form-control" placeholder="课程名称">
                                <div class="clear"></div>

                            </div>
                            <div class="form-group foBox">
                                <label for="name">讲师</label>
                                <input type="text" class="form-control" placeholder="讲师姓名">
                                <div class="clear"></div>

                            </div>
                            <div class="form-group foBox" style="width: 15%;float: right">
                                <button type="submit" class="btn btn-default" id="BTN">提交</button>
                            </div>


                        </form>
                    </div>
                    <div class="addcourse">
                        <span>查询结果</span>
                        <div class="addbtn">
                            <span><span class="glyphicon glyphicon-plus"></span> 添加课程</span>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="table-responsive style2">

                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>选择</th>
                                <th>序号</th>
                                <th>课程名称</th>
                                <th>讲师姓名</th>
                                <th>课程分类</th>
                                <th>适用人群</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody id="table_course">


                            </tbody>


                        </table>
                    </div>

                </div>
                <div class="chatsbox"></div>
            </div>
        </div>
        <div class="clear"></div>
    </div>


    <div class="addcoursepop" id="pop">
        <div class="popboxhead">
            <div class="control-click">
                <span style="float: left;">添加课程</span>
                <span class="glyphicon glyphicon-remove-circle close"></span>
                <div style="clear: both;"></div>
            </div>
        </div>
        <form class="form-horizontal addcoursepopform" role="form">
            <div class="form-group">
                <label for="firstname" class="col-sm-3 control-label">课程名称</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" id="course_name" placeholder="请输入课程名称">
                </div>
            </div>
            <div class="form-group">
                <label for="firstname" class="col-sm-3 control-label">讲师姓名</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" id="teacher_name"
                           placeholder="请输入讲师姓名">
                </div>
            </div>
            <div class="form-group">
                <label for="firstname" class="col-sm-3 control-label">课程分类</label>
                <div class="col-sm-9">
                    <div id="sjld_2" style="width:520px;margin:0 auto;position:relative;">
                        <div class="m_zlxg" id="shenfen2">
                            <p title="">选择分类</p>
                            <div class="m_zlxg2">
                                <ul>
                                    <div class="clear"></div>
                                </ul>
                            </div>
                        </div>
                        <div class="m_zlxg" id="chengshi2">
                            <p title="">选择分类</p>
                            <div class="m_zlxg2">
                                <ul>
                                    <div class="clear"></div>
                                </ul>
                            </div>
                        </div>
                        <div class="m_zlxg" id="quyu2">
                            <p title="">选择分类</p>
                            <div class="m_zlxg2">
                                <ul>
                                    <div class="clear"></div>
                                </ul>
                            </div>
                        </div>
                        <input id="sfdq_num" type="hidden" value="" />
                        <input id="csdq_num" type="hidden" value="" />
                        <input id="sfdq_tj" type="hidden" value="" />
                        <input id="csdq_tj" type="hidden" value="" />
                        <input id="qydq_tj" type="hidden" value="" />
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="lastname" class="col-sm-3 control-label">课程难度</label>
                <div class="col-sm-9">
                    <select class="form-control" id="difficulty">
                        <option>初级</option>
                        <option>中级</option>
                        <option>高级</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="lastname" class="col-sm-3 control-label">课程简介</label>
                <div class="col-sm-9">
                    <textarea class="form-control" rows="3" id="course_brief"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label for="lastname" class="col-sm-3 control-label" style="padding-top: 3px;">上传封面</label>
                <div class="col-sm-9">
                    <input type="file" id="inputfile">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-3 col-sm-6" style="text-align: center; margin-top: 10px;">
                    <button type="submit" class="btn btn-default addcoursebtn" onclick="addCourseCover()">添加</button>
                </div>
            </div>
        </form>
    </div>

    <div class="warning">
        <img src="/img/common/tanhao.png">
        <div class="selectbox">
            <button type="button" class="btn btn-danger" id="delbtn">删除</button>
            <button type="button" class="btn btn-info" id="cancelbtn">取消</button>
        </div>
    </div>
    <!-- <div class="suc">
        <img src="../img/managehome/suc.png">
    </div> -->
    <div id="popbg" class="bodybg"></div>


    <div class="foot">
        <div class="ico">
            <ul class="icobox">
                <li class="icolist">
                    <a href=""><img src="../img/foot/qq.png"></a>
                </li>
                <li class="icolist">
                    <a href=""><img src="../img/foot/wechat.png"></a>
                </li>
                <li class="icolist">
                    <a href=""><img src="../img/foot/weibo.png"></a>
                </li>
                <div class="clear"></div>
            </ul>
        </div>
        <div class="quiklink">
            <ul class="linkbox">
                <li class="linklist">
                    <a href="">首页</a>
                </li>
                <li class="linklist">
                    <a href="">关于我们</a>
                </li>
                <li class="linklist">
                    <a href="">联系我们</a>
                </li>
                <li class="linklist">
                    <a href="">讲师招募</a>
                </li>
                <li class="linklist">
                    <a href="">常见问题</a>
                </li>
                <li class="linklist">
                    <a href="">意见反馈</a>
                </li>
                <li class="linklist">
                    <a href="">友情链接</a>
                </li>
                <div class="clear"></div>
            </ul>
        </div>
        <div class="copy">
            <span>傲娇小龙坎版权所有</span>
        </div>
    </div>
</div>


<script src="/ajxlk/jquery/jquery-3.2.1.js"></script>
<script src="/ajxlk/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/CourseCenter.js"></script>

<script type="text/javascript">


    function addCourseCover() {
        var formData = new FormData();
        formData.append('file', $('#inputfile')[0].files[0]);
        console.log("form data " + formData);
        $.ajax({
            url: "/course/addCourse/cover",
            type: "post",
            dataType:"text",
            cache: false,
            data: formData,
            async : false,
            processData: false,  // tell jQuery not to process the data
            contentType: false,  // tell jQuery not to set contentType
            success: function (data) {
                alert(data)
                addCourse(data);
                alert(data + "end");
            },
            error: function (err) {
                alert(err);
            }
        });

    }

//    function addCourse() {
    function addCourse(data) {
        alert("addCourse");
        $.ajax({
            url:"/course/addCourse",
            type:"post",
            dataType:"text",
//            async : false,
            data : {
                course_name: $('#course_name').val(),
                teacher_name: $('#teacher_name').val(),
                cata: 1,
                difficulty: $('#difficulty').val(),
                course_brief: $('#course_brief').val(),
                courseCover:data
            },
//            processData: true,
//            contentType: true,
            success: function (data) {
                alert(data);
            },
            error: function (err) {
                alert(err);
            }

        });
    }

    function deleteUser(userId) {

    }

    function deleteCourse() {
        swal({
                title: "确定删除?",
                text: "如果删除数据将不能找回",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "确定删除",
                closeOnConfirm: true
            }, function () {
//                $.ajax({
//                    url: "/user/" + userId + "/delete",
//                    type: "post",
//                    dataType: "json",
//                    success: function (data, status) {
//                        if (status != "success") {
//                            toastr.error("删除失败，请检查网络和服务器运行情况!!!");
//                            return;
//                        }
//                        if (data.code != 200) {
//                            toastr.error(data.msg);
//                            return;
//                        }
//                        toastr.success(data.msg);
//                        $("#table_user").bootstrapTable("refresh");
//                        $("#table_user").bootstrapTable('remove', {
//                            field: 'id',
//                            values: !isNaN(roleId) ? [roleId] : roleId
//                        });
//                    },
//                    error: function (data, status) {
//                        toastr.error("删除失败，请检查网络和服务器运行情况！");
//                    }
//                });

            }
        );
//        var father = $(this).parent().parent();
//        var child = father.$("td");
//        alert(child.length);
////        courseId = child.innerHTML;
//        alert(child.innerHTML);
//        $("#popbg").fadeToggle();
//        $(".warning").fadeToggle();
//        var father = this.parentNode.parentNode;
//        var child = father.getElementsByTagName("td");
//        alert(child.length);
    }


    $(document).ready(function () {
        $.ajax({
            url: "/getAllCourseJson",
            type: "get",
            dataType: "json",
            success: function (data) {
                var tb_course = "";
                for (var i = 0; i < data.length; i++) {
                    tb_course += '<tr><td><input type="checkbox" value=""></td><td>' + data[i].courseId + '</td><td>' +
                        data[i].courseName + '</td><td>' + data[i].teacherName +
                        '</td><td>' + data[i].category_name + '</td><td>' + data[i].difficulty +
                        '</td><td>' +
                        '<span class="glyphicon glyphicon-remove" onclick="deleteCourse()"></span>' +
                        '<a href="/course/editCourse/'+  data[i].courseId + '">&nbsp;&nbsp;' +
                        '<span class="glyphicon glyphicon-edit" id="edit"></span>' +
                        '</a>' +
                        '</td></tr>';
                }
                $('#table_course').append(tb_course);
            },
            error: function () {
            }

        });
    });


</script>



<script type="text/javascript" src="/js/address.js"></script>

<div th:include="main/commonJs"::commonJs/>

<script type="text/javascript">
    $(function(){
        $("#sjld").sjld("#shenfen","#chengshi","#quyu");
        $("#sjld_2").sjld("#shenfen2","#chengshi2","#quyu2");
    });
</script>


</body>
</html>